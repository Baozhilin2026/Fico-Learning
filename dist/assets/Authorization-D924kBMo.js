import{d as E,u as R,o as A,c as B,a as o,t as m,b as c,e as a,w as r,f as I,r as n,g as h,h as L,i as M,l as N,j as q,k as F,m as g,n as f,p as K,E as O}from"./index-SAl2EyZQ.js";import{_ as P}from"./logo-Cq9nXPts.js";import{u as j,_ as D}from"./_plugin-vue_export-helper-Cve9Aa48.js";const T={class:"authorization-page"},U={class:"auth-container"},G={class:"auth-description"},H={class:"auth-form"},J={class:"auth-actions"},Q=E({__name:"Authorization",setup(W){const v=L(),y=R(),{t:e}=j(),u=f(),d=f(!1),s=f(""),i=K({code:""}),b={code:[{required:!0,message:e("auth.codeRequired"),trigger:"blur"},{min:6,message:e("auth.codeMinLength"),trigger:"blur"}]};A(async()=>{});async function _(){if(u.value)try{if(!await u.value.validate())return;d.value=!0,s.value="",await y.login(i.code)?(O.success(e("auth.loginSuccess")),v.push("/home")):s.value=e("auth.invalidCode")}catch(l){s.value=e("auth.loginError"),console.error("Login error:",l)}finally{d.value=!1}}function w(){var l;i.code="",s.value="",(l=u.value)==null||l.clearValidate()}return(l,t)=>{const C=n("el-icon"),k=n("el-input"),V=n("el-form-item"),S=n("el-alert"),p=n("el-button"),x=n("el-form");return h(),B("div",T,[o("div",U,[t[1]||(t[1]=o("div",{class:"auth-logo"},[o("img",{src:P,alt:"FICO Learning",class:"logo"})],-1)),t[2]||(t[2]=o("h1",{class:"auth-title"},"SAP FICO English Learning Platform",-1)),o("p",G,m(c(e)("auth.description")),1),o("div",H,[a(x,{ref_key:"formRef",ref:u,model:i,rules:b,onSubmit:I(_,["prevent"])},{default:r(()=>[a(V,{prop:"code"},{default:r(()=>[a(k,{modelValue:i.code,"onUpdate:modelValue":t[0]||(t[0]=z=>i.code=z),type:"password",placeholder:c(e)("auth.enterCode"),"show-password":"",size:"large",clearable:"",onKeyup:M(_,["enter"])},{prefix:r(()=>[a(C,null,{default:r(()=>[a(c(N))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s.value?(h(),q(S,{key:0,title:s.value,type:"error",closable:!1,"show-icon":"",class:"auth-error"},null,8,["title"])):F("",!0),o("div",J,[a(p,{type:"primary",size:"large",loading:d.value,onClick:_},{default:r(()=>[g(m(c(e)("auth.validate")),1)]),_:1},8,["loading"]),a(p,{size:"large",onClick:w},{default:r(()=>[g(m(c(e)("auth.reset")),1)]),_:1})])]),_:1},8,["model"])])])])}}}),$=D(Q,[["__scopeId","data-v-f69b9f1b"]]);export{$ as default};
