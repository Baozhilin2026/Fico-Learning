import{d as D,n as r,o as K,L as j,c as C,e as a,a as s,w as l,F as T,C as x,j as N,k as H,K as w,r as f,g as d,m as v,b as J,U as O}from"./index-EpalMCu9.js";import{u as W}from"./bookmarks-BxTgSmNn.js";import{a as X,T as Y}from"./useTTS-CvA7TtTJ.js";import{u as Z}from"./useStudyTimer-DggI-VCl.js";import{B as $}from"./BottomInfoBar-BDhUuWO2.js";import{Q as ee}from"./QuestionCard-DxL0JEqx.js";import{_ as te}from"./_plugin-vue_export-helper-C68I2N45.js";import"./logo-CHlci69U.js";const oe={class:"interview-page"},ne={class:"top-bar"},ae={class:"scenario-section"},se={class:"tts-settings"},le={class:"tts-row"},re={class:"tts-row"},ie={class:"tts-row"},ue={class:"page-content"},de={class:"main-content"},ve={key:0,class:"loading-container"},ce={key:1,class:"questions-list"},pe=D({__name:"InterviewContent",setup(me){const _=W(),m=X();Z();const S=r(""),k=r([]),g=r(1),c=r(10),p=r(null),q=r([]),V=r(m.ttsAccent),h=r(m.ttsGender),B=r(m.ttsRate),A=w(()=>{var t;return((t=p.value)==null?void 0:t.parts)||[]}),i=w(()=>{let t=q.value;if(k.value.length>0&&(t=t.filter(e=>k.value.includes(e.part))),S.value.trim()){const e=S.value.toLowerCase();t=t.filter(n=>n.question.questionContent.toLowerCase().includes(e)||n.question.sampleAnswer.toLowerCase().includes(e)||n.question.questionContentCN&&n.question.questionContentCN.includes(e)||n.question.sampleAnswerCN&&n.question.sampleAnswerCN.includes(e))}return t}),z=w(()=>{const t=(g.value-1)*c.value,e=Math.min(g.value*c.value,i.value.length);return i.value.slice(t,e)}),y=w(()=>{const t=Math.ceil(i.value.length/c.value);return console.log("[InterviewContent] Computed:",{filteredQuestionsLength:i.value.length,pageSize:c.value,totalPages:t}),t});function P(t){console.log("[InterviewContent] Page changed to:",t),g.value=t;const e=(t-1)*c.value,n=Math.min(t*c.value,i.value.length);console.log("[InterviewContent] Showing items",e,"to",n,"of",i.value.length)}function L(t){return _.isBookmarked("interview",t.question.questionNo)}function Q(t){const e=t.question.questionNo;_.isBookmarked("interview",e)?_.removeBookmark("interview",e):_.addBookmark("interview",e,t)}function U(){g.value=1}function G(t){m.setTTSAccent(t)}function F(t){m.setTTSGender(t)}function M(t){m.setTTSRate(t)}return K(async()=>{var t,e;try{console.log("Loading interview data..."),p.value=await j.loadInterviewQA(),console.log("Interview data loaded:",p.value),console.log("Parts:",(t=p.value)==null?void 0:t.parts),(e=p.value)!=null&&e.parts&&(p.value.parts.forEach(n=>{console.log("Processing part:",n.partId,n.partName),n.questions.forEach(b=>{q.value.push({part:n.partId,partName:n.partName,question:b})})}),console.log("Total questions loaded:",q.value.length),console.log("Filtered questions length:",i.value.length),console.log("Total pages:",y.value))}catch(n){console.error("Failed to load interview data:",n)}}),(t,e)=>{const n=f("el-option"),b=f("el-select"),u=f("el-radio-button"),I=f("el-radio-group"),R=f("el-icon"),E=f("el-pagination");return d(),C("div",oe,[a(Y),s("div",ne,[s("div",ae,[e[5]||(e[5]=s("span",{class:"scenario-label"},"选择场景 / Select Scenario:",-1)),a(b,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=o=>k.value=o),placeholder:"全部 / All",clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",onChange:U,class:"scenario-select"},{default:l(()=>[(d(!0),C(T,null,x(A.value,o=>(d(),N(n,{key:o.partId,label:o.partName,value:o.partId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s("div",se,[s("div",le,[e[9]||(e[9]=s("span",{class:"tts-label"},"口音 / Accent:",-1)),a(I,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=o=>V.value=o),onChange:G,size:"small"},{default:l(()=>[a(u,{value:"indian"},{default:l(()=>[...e[6]||(e[6]=[v("印度",-1)])]),_:1}),a(u,{value:"singapore"},{default:l(()=>[...e[7]||(e[7]=[v("新加坡",-1)])]),_:1}),a(u,{value:"western"},{default:l(()=>[...e[8]||(e[8]=[v("欧美",-1)])]),_:1})]),_:1},8,["modelValue"])]),s("div",re,[e[12]||(e[12]=s("span",{class:"tts-label"},"性别 / Gender:",-1)),a(I,{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=o=>h.value=o),onChange:F,size:"small"},{default:l(()=>[a(u,{value:"male"},{default:l(()=>[...e[10]||(e[10]=[v("男",-1)])]),_:1}),a(u,{value:"female"},{default:l(()=>[...e[11]||(e[11]=[v("女",-1)])]),_:1})]),_:1},8,["modelValue"])]),s("div",ie,[e[16]||(e[16]=s("span",{class:"tts-label"},"语速 / Speed:",-1)),a(I,{modelValue:B.value,"onUpdate:modelValue":e[3]||(e[3]=o=>B.value=o),onChange:M,size:"small"},{default:l(()=>[a(u,{value:.8},{default:l(()=>[...e[13]||(e[13]=[v("慢",-1)])]),_:1}),a(u,{value:1},{default:l(()=>[...e[14]||(e[14]=[v("中",-1)])]),_:1}),a(u,{value:1.2},{default:l(()=>[...e[15]||(e[15]=[v("快",-1)])]),_:1})]),_:1},8,["modelValue"])])])]),s("div",ue,[s("div",de,[p.value?(d(),C("div",ce,[(d(!0),C(T,null,x(z.value,o=>(d(),N(ee,{key:o.question.questionNo,question:o.question,part:o.part,"part-name":o.partName,"is-bookmarked":L(o),onBookmark:Q},null,8,["question","part","part-name","is-bookmarked"]))),128))])):(d(),C("div",ve,[a(R,{class:"is-loading",size:32},{default:l(()=>[a(J(O))]),_:1}),e[17]||(e[17]=s("p",null,"加载中...",-1))])),y.value>1?(d(),N(E,{key:2,"current-page":g.value,"onUpdate:currentPage":e[4]||(e[4]=o=>g.value=o),onCurrentChange:P,"page-size":c.value,total:i.value.length,class:"pagination",style:{position:"relative","z-index":"100",display:"flex !important",visibility:"visible !important"}},null,8,["current-page","page-size","total"])):H("",!0)])]),a($)])}}}),Ie=te(pe,[["__scopeId","data-v-0fcc7027"]]);export{Ie as default};
