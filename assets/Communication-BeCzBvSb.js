import{d as K,n as i,o as M,L as R,c as k,e as t,a as n,w as l,F as O,C as D,j,k as q,K as h,r as p,g,m as u,b as H,U as J}from"./index-EpalMCu9.js";import{u as Q}from"./bookmarks-BxTgSmNn.js";import{a as W,T as X}from"./useTTS-CvA7TtTJ.js";import{u as Y}from"./useStudyTimer-DggI-VCl.js";import{B as Z}from"./BottomInfoBar-BDhUuWO2.js";import{S as $}from"./ScriptCard-EopfEI9u.js";import{_ as ee}from"./_plugin-vue_export-helper-C68I2N45.js";import"./logo-CHlci69U.js";const oe={class:"communication-page"},te={class:"top-bar"},ae={class:"object-section"},ne={class:"ts-settings"},le={class:"ts-row"},se={class:"ts-row"},ie={class:"ts-row"},re={class:"page-content"},ue={class:"main-content"},de={key:0,class:"loading-container"},ce={key:1,class:"scripts-list"},me=K({__name:"Communication",setup(ve){const f=Q(),c=W();Y();const V=i(""),B=i(c.ttsAccent),y=i(c.ttsGender),w=i(c.ttsRate),_=i(""),m=i(1),v=i(10),b=i([]),x=i(!1),d=h(()=>{let o=b.value;if(_.value&&(o=o.filter(e=>e.object===_.value)),V.value.trim()){const e=V.value.toLowerCase();o=o.filter(s=>s.scenario.英文话术.toLowerCase().includes(e)||s.scenario.中文话术.includes(e)||s.scenario.使用场景.includes(e))}return o}),z=h(()=>{const o=(m.value-1)*v.value,e=Math.min(m.value*v.value,d.value.length);return d.value.slice(o,e)}),T=h(()=>Math.ceil(d.value.length/v.value));function U(o){console.log("[Communication] Page changed to:",o),m.value=o;const e=(o-1)*v.value,s=Math.min(o*v.value,d.value.length);console.log("[Communication] Showing items",e,"to",s,"of",d.value.length)}function F(o){return f.isBookmarked("communication",String(o.scenario.场景序号))}function A(o){const e=String(o.scenario.场景序号);f.isBookmarked("communication",e)?f.removeBookmark("communication",e):f.addBookmark("communication",e,o)}function I(){m.value=1}function L(o){c.setTTSAccent(o)}function P(o){c.setTTSGender(o)}function G(o){c.setTTSRate(o)}return M(async()=>{try{(await R.loadCommunication()).沟通话术列表.forEach(e=>{e.阶段列表.forEach(s=>{s.场景列表.forEach(C=>{b.value.push({object:e.沟通对象,phase:s.阶段名称,scenario:C})})})}),console.log("Communication scripts loaded:",b.value.length),console.log("Filtered scripts length:",d.value.length),console.log("Total pages:",T.value),x.value=!0}catch(o){console.error("Failed to load communication data:",o)}}),(o,e)=>{const s=p("el-option"),C=p("el-select"),r=p("el-radio-button"),S=p("el-radio-group"),N=p("el-icon"),E=p("el-pagination");return g(),k("div",oe,[t(X),n("div",te,[n("div",ae,[e[5]||(e[5]=n("span",{class:"object-label"},"筛选沟通对象 / Filter Object:",-1)),t(C,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),placeholder:"全部 / All",clearable:"",onChange:I,class:"object-select"},{default:l(()=>[t(s,{label:"全部",value:""}),t(s,{label:"Key User",value:"Key User"}),t(s,{label:"CFO",value:"财务总监"})]),_:1},8,["modelValue"])]),n("div",ne,[n("div",le,[e[9]||(e[9]=n("span",{class:"ts-label"},"口音 / Accent:",-1)),t(S,{modelValue:B.value,"onUpdate:modelValue":e[1]||(e[1]=a=>B.value=a),onChange:L,size:"small"},{default:l(()=>[t(r,{value:"indian"},{default:l(()=>[...e[6]||(e[6]=[u("印度",-1)])]),_:1}),t(r,{value:"singapore"},{default:l(()=>[...e[7]||(e[7]=[u("新加坡",-1)])]),_:1}),t(r,{value:"western"},{default:l(()=>[...e[8]||(e[8]=[u("欧美",-1)])]),_:1})]),_:1},8,["modelValue"])]),n("div",se,[e[12]||(e[12]=n("span",{class:"ts-label"},"性别 / Gender:",-1)),t(S,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=a=>y.value=a),onChange:P,size:"small"},{default:l(()=>[t(r,{value:"male"},{default:l(()=>[...e[10]||(e[10]=[u("男",-1)])]),_:1}),t(r,{value:"female"},{default:l(()=>[...e[11]||(e[11]=[u("女",-1)])]),_:1})]),_:1},8,["modelValue"])]),n("div",ie,[e[16]||(e[16]=n("span",{class:"ts-label"},"语速 / Speed:",-1)),t(S,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=a=>w.value=a),onChange:G,size:"small"},{default:l(()=>[t(r,{value:.8},{default:l(()=>[...e[13]||(e[13]=[u("慢",-1)])]),_:1}),t(r,{value:1},{default:l(()=>[...e[14]||(e[14]=[u("中",-1)])]),_:1}),t(r,{value:1.2},{default:l(()=>[...e[15]||(e[15]=[u("快",-1)])]),_:1})]),_:1},8,["modelValue"])])])]),n("div",re,[n("div",ue,[x.value?(g(),k("div",ce,[(g(!0),k(O,null,D(z.value,a=>(g(),j($,{key:a.scenario.场景序号,scenario:a.scenario,object:a.object,phase:a.phase,"is-bookmarked":F(a),onBookmark:A},null,8,["scenario","object","phase","is-bookmarked"]))),128))])):(g(),k("div",de,[t(N,{class:"is-loading",size:32},{default:l(()=>[t(H(J))]),_:1}),e[17]||(e[17]=n("p",null,"加载中...",-1))])),T.value>1?(g(),j(E,{key:2,"current-page":m.value,"onUpdate:currentPage":e[4]||(e[4]=a=>m.value=a),onCurrentChange:U,"page-size":v.value,total:d.value.length,class:"pagination",style:{position:"relative","z-index":"100",display:"flex !important",visibility:"visible !important"}},null,8,["current-page","page-size","total"])):q("",!0)])]),t(Z)])}}}),he=ee(me,[["__scopeId","data-v-4ccbe44e"]]);export{he as default};
